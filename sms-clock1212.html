<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WHS Clock</title>
    <link rel="icon" type="image/x-icon" href="https://r2.e-z.host/13985022-a2bd-482f-bea2-18ff85c0dc2e/4s3ejiz9.png">
    <style>
        body {
            background-image: url('https://cdn.pixabay.com/photo/2017/08/30/01/05/milky-way-2695569_1280.jpg');
            background-color: #5f8df7;
            background-size: cover;
        }

        #remaining-time {
            font-size: 2.5vw;
            color: #ff0000;
        }

        .text {
            color: #44ff00;
            font-size: 1.32vw;
        }

        h1 {
            color: #66ff00;
            text-align: center;
            font-size: 3.64vw;
        }

        nav ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            float: right;
        }

        nav ul li {
            display: inline;
            padding: 10px;
        }

        nav ul li a {
            color: #fff;
            text-decoration: none;
        }

    </style>
</head>
<body>
    <p></p>
    <nav>
        <ul></ul>
    </nav>

    <h1 id="current-period">School is not in session at the moment</h1>
    <span id="remaining-time"></span>

    <div class="text">
        Class start and end times apply to 8th grade. Other grades may not be correct.
    </div>
    <div class="text">
        Class 1: 7:40 - 8:40
    </div>
    <div class="text">
        Class 2: 8:43 - 9:43
    </div>
    <div class="text">
        Advisory: 9:46 - 10:16
    </div>
    <div class="text">
        Class 4: 10:19 - 11:19
    </div>
    <div class="text">
        Class 5: 11:22 - 12:07
    </div>
    <div class="text">
        Class 6: 1:10 - 2:10
    </div>

    <!-- Dropdown for lunch selection -->
    <select id="lunch-select">
        <option value="first">First Lunch</option>
        <option value="second">Second Lunch</option>
    </select>

    <div class="text" id="lunch-info"></div>

    <div class="text">
        Period After First Lunch: 12:08 - 1:07
    </div>
    <div class="text">
        Period After Second Lunch: 1:08 - 2:10
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Define periods and lunch specifics
            const periods = [
                { start: "07:40:00", end: "08:40:00", name: "Class 1" },
                { start: "08:43:00", end: "09:43:00", name: "Class 2" },
                { start: "09:46:00", end: "10:16:00", name: "Advisory" },
                { start: "10:19:00", end: "11:19:00", name: "Class 4" },
                { start: "11:22:00", end: "12:07:00", name: "Class 5" },
                { start: "12:08:00", end: "13:10:00", name: "Period After First Lunch" },
                { start: "13:08:00", end: "14:10:00", name: "Period After Second Lunch" }
            ];

            // Define lunch timings
            const lunchSchedules = {
                first: {
                    lunchStart: "11:19:00",
                    lunchEnd: "11:45:00",
                    text: "First Lunch: Enjoy your meal!"
                },
                second: {
                    lunchStart: "12:42:00",
                    lunchEnd: "13:07:00",
                    text: "Second Lunch: Enjoy your meal!"
                }
            };

            function getCurrentPeriod() {
                const currentTime = new Date();
                let currentPeriod = "School is not in session at the moment";
                let secondsRemaining = 0;

                // Check for instructional periods
                periods.forEach(period => {
                    const startDateObj = new Date();
                    const endDateObj = new Date();
                    const [sh, sm] = period.start.split(":").map(Number);
                    const [eh, em] = period.end.split(":").map(Number);
                    startDateObj.setHours(sh, sm);
                    endDateObj.setHours(eh, em);

                    if (currentTime >= startDateObj && currentTime < endDateObj) {
                        currentPeriod = period.name;
                        secondsRemaining = Math.floor((endDateObj - currentTime) / 1000);
                    }
                });

                // Check lunch periods based on selection
                const lunchSelect = document.getElementById("lunch-select");
                const selectedLunch = lunchSelect.value;
                const schedule = lunchSchedules[selectedLunch];

                // Lunch Periods
                const lunchStartDateObj = new Date();
                const lunchEndDateObj = new Date();
                const [lh, lm] = schedule.lunchStart.split(":").map(Number);
                const [le, lems] = schedule.lunchEnd.split(":").map(Number);
                lunchStartDateObj.setHours(lh, lm);
                lunchEndDateObj.setHours(le, lems);

                if (currentTime >= lunchStartDateObj && currentTime < lunchEndDateObj) {
                    currentPeriod = schedule.text;
                    secondsRemaining = Math.floor((lunchEndDateObj - currentTime) / 1000);
                }

                return { period: currentPeriod, secondsRemaining };
            }

            function updateCurrentPeriod() {
                const currentData = getCurrentPeriod();
                const h1 = document.getElementById("current-period");
                const timer = document.getElementById("remaining-time");
                const lunchInfo = document.getElementById("lunch-info");

                h1.textContent = currentData.period;

                if (currentData.secondsRemaining > 0) {
                    timer.textContent = "Time remaining: " + formatTime(currentData.secondsRemaining);
                } else {
                    timer.textContent = "";  // Clear if there are no seconds left
                }

                // Update lunch information based on selection
                lunchInfo.textContent = lunchSchedules[lunchSelect.value].text;
            }

            function formatTime(seconds) {
                const minutes = Math.floor(seconds / 60);
                const remainingSeconds = seconds % 60;
                return `${minutes}m ${remainingSeconds}s`;
            }

            document.getElementById("lunch-select").addEventListener("change", updateCurrentPeriod);
            updateCurrentPeriod();
            setInterval(updateCurrentPeriod, 1000); // updates every second
        });
    </script>
</body>
</html>
